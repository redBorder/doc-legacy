<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "manual.ent">
<!ENTITY PRODUCT "Documentation">
<!ENTITY BOOKID "euskaltel">
<!ENTITY YEAR "2015">
<!ENTITY HOLDER "Eneo Tecnología S.L. |">
]>
<chapter>
	<title>Eventos de la red de telefonía móvil (HNB-GW, GGSN)</title>

	<mediaobject>
		<imageobject>
			<imagedata scalefit="1" align="center" width="350" fileref="images/diagram.png"/>
		</imageobject>
		<textobject>
			<phrase>Diagrama de paso de mensajes entre HNB-GW, GGSN y redBorder</phrase>
		</textobject>
			<caption>
				<para>Diagrama de paso de mensajes entre HNB-GW, GGSN y redBorder</para>
			</caption>
	</mediaobject>

	<itemizedlist mark="bullet">
		<listitem>
			<para><literal>HNB: </literal>Nodo B.</para>
		</listitem>
		<listitem>
			<para><literal>HNB-GW: </literal>Pasarela de medios de nodos B.</para>
		</listitem>
		<listitem>
			<para><literal>GGSN: </literal>Pasarela de soporte GPRS.</para>
		</listitem>
		<listitem>
			<para><literal>UE: </literal>Equipo de usuario.</para>
		</listitem>
	</itemizedlist>

    <para>En primer lugar vamos a analizar los mensajes [1] y [2], pertenecientes al HNB-GW: </para>

    <itemizedlist mark="bullet">

		<listitem>
			<para><literal>[1] Notify Register: </literal>  Este mensaje se produce cuando un nodo HNB se registra contra una pasarela HNB-GW.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="350" fileref="images/hbnRegister.png"/>
				</imageobject>
				<textobject>
					<phrase>Evento de notificación, cuando se realiza una subscripción del HNB.</phrase>
				</textobject>
				<caption>
					<para>Evento de notificación, cuando se realiza una subscripción del HNB.</para>
				</caption>
			</mediaobject>
			<itemizedlist mark="bullet">
				<listitem>
					<para><literal>hnbid: </literal>Identificador del HNB.</para>
				</listitem>
				<listitem>
					<para><literal>path: </literal>Identificador de la sesión entre el HNB y el HNB-GW.</para>
				</listitem>
			</itemizedlist>
		</listitem>

		<listitem>
			<para><literal>[2] Notify UE: </literal>Este mensaje se produce cuando un UE se registra contra un HNB.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="350" fileref="images/ueRegister.png"/>
				</imageobject>
				<textobject>
					<phrase>Mensaje de notificación, cuando se realiza una subscripción de un UE en un HNB.</phrase>
				</textobject>
				<caption>
					<para>Mensaje de notificación, cuando se realiza una subscripción de un UE en un HNB.</para>
				</caption>
			</mediaobject>
			<itemizedlist mark="bullet">
				<listitem>
					<para><literal>imsi: </literal> Código de indentificación único para cada dispositivo de telefonía movil.</para>
				</listitem>
				<listitem>
					<para><literal>path: </literal> Indentificador de la sesión entre el HNB y el HNB-GW.</para>
				</listitem>
			</itemizedlist>
		</listitem>

	</itemizedlist>

	<para>Gracias a que ambos eventos contienen el mismo path de sesion, podemos realizar una asociación entre el HNB y el UE. Ahora realizaremos
		un analisis de los eventos procedentes del GGSN, que se producen cuando un UE establece un contexto PDP:</para>

	<itemizedlist mark="bullet">

		<listitem>
			<para><literal>[3] Associated PDP Context </literal>Este mensaje se produce cuando un UE establece un contexto PDP.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="350" fileref="images/ueGGSNadd.png"/>
				</imageobject>
				<textobject>
					<phrase>Evento de notificación, cuando un UE estable un contexto PDP.</phrase>
				</textobject>
				<caption>
					<para>Evento de notificación, cuando un UE estable un contexto PDP.</para>
				</caption>
			</mediaobject>
			<itemizedlist mark="bullet">
				<listitem>
					<para><literal>hnbid: </literal>Identificador del HNB.</para>
				</listitem>
				<listitem>
					<para><literal>path: </literal>Identificador de la sesión entre el HNB y el HNB-GW.</para>
				</listitem>
			</itemizedlist>
		</listitem>

		<listitem>
			<para><literal>[4] Disassociated PDP Context: </literal>Este mensaje se produce cuando un UE se desasociada.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="350" fileref="images/ueGGSNdel.png"/>
				</imageobject>
				<textobject>
					<phrase>Mensaje de notificación, cuando se realiza una desconexión de un UE en un HNB.</phrase>
				</textobject>
				<caption>
					<para>Mensaje de notificación, cuando se realiza una desconexión de un UE en un HNB.</para>
				</caption>
			</mediaobject>
			<itemizedlist mark="bullet">
				<listitem>
					<para><literal>apn: </literal>Nombre de la estación del GGSN.</para>
				</listitem>
				<listitem>
					<para><literal>ipAddress: </literal>Dirección IP asiganada al UE.</para>
				</listitem>
				<listitem>
					<para><literal>rat: </literal>Tecnología de acceso radio.</para>
				</listitem>
			</itemizedlist>
		</listitem>

	</itemizedlist>

	<para>Finalmente el usuario se establece la relación entre los datos del contexto PDP y el nodo HNB. Esta relación se consigue usando el indentificador del dispositivo (imsi).</para>

</chapter>
